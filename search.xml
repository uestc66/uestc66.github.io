<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[js å¼•æ“(ä¸€)]]></title>
    <url>%2F2019%2F08%2F18%2FWeb%E5%89%8D%E7%AB%AF%2Fjs%20%E5%BC%95%E6%93%8E(%E4%B8%80)%2F</url>
    <content type="text"><![CDATA[åœ¨ Facebook å‘å¸ƒ Hermes å¼•æ“ä¹‹å‰ï¼ŒFabrice Bellard ä»¥åŠ C è¯­è¨€ä¸“å®¶ Charlie Gordon å…¬å¼€å‘å¸ƒäº† QuickJSã€‚ Facebookå‘å¸ƒå…¨æ–°JSå¼•æ“ï¼ä¸“æ³¨æé«˜React Nativeåº”ç”¨çš„æ€§èƒ½ ä¸ºäº†æé«˜ Facebook åº”ç”¨çš„æ€§èƒ½ï¼Œæˆ‘ä»¬çš„å›¢é˜Ÿä¸æ–­æ”¹è¿›è‡ªå·±çš„ JavaScript ä»£ç å’Œå¹³å°ã€‚åœ¨åˆ†ææ€§èƒ½æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å‘ç° JavaScript å¼•æ“æœ¬èº«æ˜¯å½±å“å¯åŠ¨æ€§èƒ½å’Œåº”ç”¨åŒ…ä½“ç§¯çš„é‡è¦å› ç´ ã€‚æœ‰äº†è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬æ„è¯†åˆ°å¿…é¡»åœ¨æ¯” PC ç«¯é™åˆ¶æ›´å¤šçš„ç§»åŠ¨ç¯å¢ƒä¸­ä¼˜åŒ– JavaScript æ€§èƒ½ã€‚å°è¯•äº†å„ç§æ–¹æ¡ˆåï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªæ–°çš„ JavaScript å¼•æ“ï¼šHermesã€‚å®ƒæ—¨åœ¨æé«˜åº”ç”¨æ€§èƒ½ï¼Œä¸“æ³¨äº React Native åº”ç”¨ï¼Œå¹¶ä¸”åœ¨å¸‚é¢ä¸Šé‚£äº›å†…å­˜è¾ƒå°‘ã€å­˜å‚¨é€Ÿåº¦è¾ƒæ…¢ä¸”è®¡ç®—èƒ½åŠ›ä½ä¸‹çš„ç§»åŠ¨è®¾å¤‡ä¸Šéƒ½æœ‰è‰¯å¥½çš„è¡¨ç°ã€‚ ä¸»è¦ç‰¹ç‚¹ï¼š å­—èŠ‚ç é¢„ç¼–è¯‘ æ—  JIT åƒåœ¾å›æ”¶ç­–ç•¥ è½»é‡å¯åµŒå…¥çš„QuickJSå¼•æ“é‡ç£…å¼€æºï¼Œå®ƒä¼šæ˜¯ä¸‹ä¸€ä¸ªV8å—ï¼Ÿ ä¸€è·¯å¼€æŒ‚çš„ä½œè€… Fabrice Bellard æ˜¯ä¸€ä½æ³•å›½è‘—åçš„è®¡ç®—æœºç¨‹åºå‘˜ï¼Œå›  FFmpegã€QEMU ç­‰é¡¹ç›®è€Œé—»åä¸šå†…ã€‚ä»–ä¹Ÿæ˜¯æœ€å¿«åœ†å‘¨ç‡ç®—æ³•è´æ‹‰å…¬å¼ã€TCCBOOT å’Œ TCC ç­‰é¡¹ç›®çš„ä½œè€…ã€‚ QuickJS æ”¯æŒ ES2019 è§„èŒƒï¼ŒåŒ…æ‹¬æ¨¡å—ï¼Œå¼‚æ­¥ç”Ÿæˆå™¨å’Œä»£ç†ï¼Œä¸»è¦ç‰¹ç‚¹ï¼š å°å·§ä¸”æ˜“äºåµŒå…¥ï¼šåªéœ€å‡ ä¸ª C æ–‡ä»¶ï¼Œæ— å¤–éƒ¨ä¾èµ–ï¼Œx86 ä¸‹ä¸€ä¸ªç®€å•çš„ hello world ç¤ºä¾‹ç¨‹åºä»… 190 KB çš„å¤§å°ã€‚ å…·æœ‰æä½å¯åŠ¨æ—¶é—´çš„å¿«é€Ÿè§£é‡Šå™¨ï¼šåœ¨å°å¼ PC çš„å•æ ¸ä¸Šï¼Œåœ¨å¤§çº¦ 100 ç§’å†…è¿è¡Œ ECMAScript æµ‹è¯•å¥—ä»¶56000 æ¬¡æµ‹è¯•ã€‚è¿è¡Œæ—¶å®ä¾‹çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸåœ¨ä¸åˆ° 300 å¾®ç§’çš„æ—¶é—´å†…å®Œæˆã€‚ æ”¯æŒ ES2019 ï¼ŒåŒ…æ‹¬æ¨¡å—ã€å¼‚æ­¥ç”Ÿæˆå™¨å’Œå®Œæ•´çš„ Annex B æ”¯æŒï¼ˆä¼ ç»Ÿçš„ Web å…¼å®¹æ€§ï¼‰ã€‚ 100ï¼…çš„é€šè¿‡äº† ECMAScript æµ‹è¯•ç”¨ä¾‹ã€‚ å¯ä»¥å°† Javascript æºç¼–è¯‘ä¸ºæ²¡æœ‰å¤–éƒ¨ä¾èµ–çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ ä½¿ç”¨å¼•ç”¨è®¡æ•°ï¼ˆä»¥å‡å°‘å†…å­˜ä½¿ç”¨å¹¶å…·æœ‰ç¡®å®šæ€§è¡Œä¸ºï¼‰çš„åƒåœ¾æ”¶é›†ä¸å¾ªç¯åˆ é™¤ã€‚ æ•°å­¦æ‰©å±•ï¼šBigIntï¼ŒBigFloatï¼Œè¿ç®—ç¬¦é‡è½½ï¼Œbigint æ¨¡å¼ï¼Œæ•°å­¦æ¨¡å¼ã€‚ åœ¨ Javascript ä¸­å®ç°çš„å…·æœ‰ä¸Šä¸‹æ–‡ç€è‰²çš„å‘½ä»¤è¡Œè§£é‡Šå™¨ã€‚ å¸¦æœ‰ C åº“åŒ…è£…åº“æ„å»ºçš„å†…ç½®æ ‡å‡†åº“ã€‚ PS: å‰ç«¯æ€§èƒ½ä¼˜åŒ–ç»ˆäºèµ°åˆ°äº† js å¼•æ“çš„å±‚é¢ã€‚ä¸ºäº†æ›´å¥½åœ°åœ°äº†è§£å¼•æ“æŠ€æœ¯ï¼Œæˆ‘ä»¬å…ˆæ¥æ¸©æ•…ä¸€ä¸‹ js åŸºç¡€æœºåˆ¶ï¼šå¼€å‘åšäº†è¿™ä¹ˆå¤šå¹´ï¼Œä½ çœŸçš„äº†è§£JSå·¥ä½œæœºåˆ¶å—ï¼Ÿ JIT å°† JS è§†ä¸ºä¸€ç§è§£é‡Šæ€§è¯­è¨€æ˜¯ä¸å¯¹çš„ã€‚ä»¥å‰å¾ˆå¤šå¹´ JS çš„ç¡®æ˜¯è§£é‡Šæ€§çš„ï¼Œä½†æœ€è¿‘å‡ºç°äº†ä¸€äº›å˜åŒ–ï¼Œè¿™ç§å‡è®¾ä¹Ÿéšä¹‹è¿‡æ—¶äº†ã€‚è®¸å¤šæµè¡Œçš„ JS å¼•æ“ä¸ºäº†ä½¿ JS æ‰§è¡Œæ›´å¿«ï¼Œå¼•å…¥äº†ä¸€ç§ç§°ä¸º Just-In-Time ç¼–è¯‘çš„åŠŸèƒ½ã€‚ç®€è€Œè¨€ä¹‹ï¼Œè¿™æ„å‘³ç€ JS ä»£ç ä¼šåœ¨æ‰§è¡ŒæœŸé—´ç›´æ¥ç¼–è¯‘æˆæœºå™¨ç ï¼ˆè‡³å°‘ V8 æ˜¯è¿™æ ·åšçš„ï¼‰ï¼Œä¸å†æœ‰è§£é‡Šè¿™ä¸€æ­¥ã€‚è¿™ä¸ªæµç¨‹è€—æ—¶ç¨é•¿ï¼Œä½†è¾“å‡ºçš„ç»“æœæ€§èƒ½æ›´å¼ºã€‚ä¸ºäº†åœ¨æœ‰é™çš„æ—¶é—´å†…å®Œæˆå·¥ä½œï¼ŒV8 å®é™…ä¸Šæœ‰ä¸¤ä¸ªç¼–è¯‘å™¨ï¼ˆä¸ç®—ä¸ WebAssembly ç›¸å…³çš„å†…å®¹ï¼‰ã€‚å…¶ä¸­ä¸€ä¸ªæ˜¯é€šç”¨çš„ï¼Œèƒ½å¤Ÿéå¸¸å¿«åœ°ç¼–è¯‘ä»»ä½• JS ä»£ç ï¼Œä½†åªè¾“å‡ºæ€§èƒ½ä¸€èˆ¬çš„ç»“æœï¼›è€Œå¦ä¸€ä¸ªç¼–è¯‘é€Ÿåº¦æœ‰ç‚¹æ…¢ï¼Œæ˜¯ç”¨æ¥ç¼–è¯‘å¸¸ç”¨ä»£ç çš„ï¼Œå…¶è¾“å‡ºç»“æœæ€§èƒ½æé«˜ã€‚å½“ç„¶ï¼Œå› ä¸º JS æœ‰åŠ¨æ€ç±»å‹çš„ç‰¹æ€§ï¼Œè¿™äº›ç¼–è¯‘å™¨ä¹Ÿä¸å¥½åšã€‚æ‰€ä»¥ç±»å‹ä¸å˜çš„æƒ…å†µä¸‹ç¬¬äºŒä¸ªç¼–è¯‘å™¨çš„æ•ˆæœæœ€å¥½ï¼Œèƒ½è®©ä½ çš„ä»£ç è¿è¡Œèµ·æ¥å¿«å¾—å¤šã€‚ å †å’Œæ ˆ åœ¨ JS ä»£ç çš„æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šåˆ†é…ä¸¤ä¸ªå†…å­˜åŒºåŸŸâ€”â€”è°ƒç”¨æ ˆå’Œ å †ã€‚ç¬¬ä¸€ä¸ªæ€§èƒ½éå¸¸é«˜ï¼Œå› æ­¤ç”¨äºè¿ç»­æ‰§è¡Œæ‰€æä¾›çš„å‡½æ•°ã€‚æ¯ä¸ªå‡½æ•°è°ƒç”¨åœ¨è°ƒç”¨æ ˆä¸­åˆ›å»ºä¸€ä¸ªæ‰€è°“çš„â€œæ¡†æ¶â€ï¼Œå…¶ä¸­åŒ…å«å…¶å±€éƒ¨å˜é‡çš„å‰¯æœ¬å’Œ thisã€‚ä½ å¯ä»¥é€šè¿‡ Chrome è°ƒè¯•å™¨æŸ¥çœ‹å®ƒã€‚å°±åƒåœ¨å…¶ä»–ä¸å †æ ˆç±»ä¼¼çš„æ•°æ®ç»“æ„ä¸­ä¸€æ ·ï¼Œè°ƒç”¨æ ˆçš„å¸§è¢«æ¨é€æˆ–å¼¹å‡ºå †æ ˆï¼Œå…·ä½“å–å†³äºæ­£åœ¨æ‰§è¡Œæˆ–ç»ˆæ­¢çš„æ–°å‡½æ•°ã€‚ä½ å¯èƒ½è§è¿‡è°ƒç”¨æ ˆä¸Šé™æº¢å‡ºé”™è¯¯ï¼Œé€šå¸¸æ˜¯ç”±äºæŸç§å½¢å¼çš„æ— é™å¾ªç¯å¯¼è‡´çš„ã€‚ è°ˆåˆ°å †ï¼Œå°±åƒç°å®ç”Ÿæ´»ä¸­ä¸€æ ·ï¼ŒJS å †æ˜¯å­˜å‚¨æœ¬åœ°èŒƒå›´ä¹‹å¤–å¯¹è±¡çš„åœ°æ–¹ã€‚å®ƒæ¯”è°ƒç”¨æ ˆæ…¢å¾—å¤šã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè®¿é—®æœ¬åœ°å˜é‡æ—¶é€Ÿåº¦å¯èƒ½ä¼šå¿«å¾ˆå¤šã€‚å †ä¹Ÿæ˜¯å­˜æ”¾æœªè¢«è®¿é—®æˆ–ä½¿ç”¨çš„å¯¹è±¡çš„åœ°æ–¹ï¼Œè¿™ç§å¯¹è±¡å°±æ˜¯åƒåœ¾ã€‚æœ‰åƒåœ¾å°±è¦æœ‰åƒåœ¾å›æ”¶å™¨ã€‚éœ€è¦æ—¶ JS è¿è¡Œæ—¶çš„åƒåœ¾å›æ”¶å™¨å°±ä¼šæ¿€æ´»ï¼Œæ¸…ç†å †å¹¶é‡Šæ”¾å†…å­˜ã€‚ å‰ç«¯å†…å­˜ç›¸å…³æ¢ç´¢ å †å’Œæ ˆ åœ¨å‰ç«¯ä¸­ï¼Œè¢«å­˜å‚¨åœ¨æ ˆå†…çš„æ•°æ®åŒ…æ‹¬å°æ•°å€¼å‹ï¼Œstring ï¼Œboolean å’Œå¤æ‚ç±»å‹çš„åœ°å€ç´¢å¼•ã€‚æ‰€è°“å°æ•°å€¼æ•°æ®(small number), å³é•¿åº¦çŸ­äº 32 ä½å­˜å‚¨ç©ºé—´çš„ number å‹æ•°æ®ã€‚ä¸€äº›å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œè¯¸å¦‚ Arrayï¼ŒObject ç­‰ï¼Œæ˜¯è¢«å­˜åœ¨å †ä¸­çš„ã€‚ å…±äº«å†…å­˜ å½“ç¨‹åºå˜çš„è¿‡äºå¤æ‚æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›é€šè¿‡ webworker æ¥å¼€å¯æ–°çš„ç‹¬ç«‹çº¿ç¨‹ï¼Œå®Œæˆç‹¬ç«‹è®¡ç®—ã€‚ å¼€å¯æ–°çš„çº¿ç¨‹ä¼´éšè€Œæ¥çš„é—®é¢˜å°±æ˜¯é€šè®¯é—®é¢˜ã€‚webworker çš„ postMessage å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆé€šä¿¡ï¼Œä½†æ˜¯è¿™ç§é€šä¿¡æœºåˆ¶æ˜¯å°†æ•°æ®ä»ä¸€éƒ¨åˆ†å†…å­˜ç©ºé—´å¤åˆ¶åˆ°ä¸»çº¿ç¨‹çš„å†…å­˜ä¸‹ã€‚è¿™ä¸ªèµ‹å€¼è¿‡ç¨‹å°±ä¼šé€ æˆæ€§èƒ½çš„æ¶ˆè€—ã€‚ è€Œå…±äº«å†…å­˜ï¼Œé¡¾åæ€ä¹‰ï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨ä¸åŒçš„çº¿ç¨‹é—´ï¼Œå…±äº«ä¸€å—å†…å­˜ï¼Œè¿™äº›ç°æˆéƒ½å¯ä»¥å¯¹å†…å­˜è¿›è¡Œæ“ä½œï¼Œä¹Ÿå¯ä»¥è¯»å–è¿™å—å†…å­˜ã€‚çœå»äº†èµ‹å€¼æ•°æ®çš„è¿‡ç¨‹ï¼Œä¸è¨€è€Œå–»ï¼Œæ•´ä¸ªæ€§èƒ½ä¼šæœ‰è¾ƒå¤§å¹…åº¦çš„æå‡ã€‚ ä½¿ç”¨åŸå§‹çš„ postMessage æ–¹æ³•è¿›è¡Œæ•°æ®ä¼ è¾“ä½¿ç”¨ï¼Œæ¯ä¸€ä¸ªæ¶ˆæ¯å†…çš„æ•°æ®åœ¨ä¸åŒçš„çº¿ç¨‹ä¸­ï¼Œéƒ½æ˜¯è¢«å…‹éš†ä¸€ä»½ä»¥åå†ä¼ è¾“çš„ã€‚æ•°æ®é‡è¶Šå¤§ï¼Œæ•°æ®ä¼ è¾“é€Ÿåº¦è¶Šæ…¢ã€‚ sharedBufferArray çš„æ¶ˆæ¯ä¼ é€’é€šè¿‡å…±äº«å†…å­˜ä¼ é€’çš„æ•°æ®ï¼Œåœ¨ worker ä¸­æ”¹å˜äº†æ•°æ®ä»¥åï¼Œä¸»çº¿ç¨‹çš„åŸå§‹æ•°æ®ä¹Ÿè¢«æ”¹å˜äº†ã€‚ main.js 1234567891011121314151617181920var worker = new Worker(&apos;./sharedArrayBufferWorker.js&apos;);worker.onmessage = function(e)&#123; // ä¼ å›åˆ°ä¸»çº¿ç¨‹å·²ç»è¢«è®¡ç®—è¿‡çš„æ•°æ® console.log(&quot;e.data&quot;,&quot; -- &quot;, e.data ); // SharedArrayBuffer(3) &#123;&#125; // å’Œä¼ ç»Ÿçš„ postMessage æ–¹å¼å¯¹æ¯”ï¼Œå‘ç°ä¸»çº¿ç¨‹çš„åŸå§‹æ•°æ®å‘ç”Ÿäº†æ”¹å˜ console.log(&quot;int8Array-outer&quot;,&quot; -- &quot;, int8Array ); // Int8Array(3) [2, 3, 4]&#125;;var sharedArrayBuffer = new SharedArrayBuffer(3);var int8Array = new Int8Array(sharedArrayBuffer);int8Array[0] = 1;int8Array[1] = 2;int8Array[2] = 3;worker.postMessage(sharedArrayBuffer); worker.js 12345678910111213onmessage = function(e)&#123; var arrayData = increaseData(e.data); postMessage(arrayData);&#125;;function increaseData(arrayData)&#123; var int8Array = new Int8Array(arrayData); for(let i = 0; i &lt; int8Array.length; i++)&#123; int8Array[i] += 1; &#125; return arrayData;&#125; å‰ç«¯ Web Workers åˆ°åº•æ˜¯ä»€ä¹ˆï¼Ÿ workerçº¿ç¨‹çš„ä½¿ç”¨æœ‰ä¸€äº›æ³¨æ„ç‚¹ åŒæºé™åˆ¶ workerçº¿ç¨‹æ‰§è¡Œçš„è„šæœ¬æ–‡ä»¶å¿…é¡»å’Œä¸»çº¿ç¨‹çš„è„šæœ¬æ–‡ä»¶åŒæºï¼Œè¿™æ˜¯å½“ç„¶çš„äº†ï¼Œæ€»ä¸èƒ½å…è®¸workerçº¿ç¨‹åˆ°åˆ«äººç”µè„‘ä¸Šåˆ°å¤„è¯»æ–‡ä»¶å§ æ–‡ä»¶é™åˆ¶ ä¸ºäº†å®‰å…¨ï¼Œworkerçº¿ç¨‹æ— æ³•è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œå®ƒæ‰€åŠ è½½çš„è„šæœ¬å¿…é¡»æ¥è‡ªç½‘ç»œï¼Œä¸”éœ€è¦ä¸ä¸»çº¿ç¨‹çš„è„šæœ¬åŒæº DOMæ“ä½œé™åˆ¶ workerçº¿ç¨‹åœ¨ä¸ä¸»çº¿ç¨‹çš„windowä¸åŒçš„å¦ä¸€ä¸ªå…¨å±€ä¸Šä¸‹æ–‡ä¸­è¿è¡Œï¼Œå…¶ä¸­æ— æ³•è¯»å–ä¸»çº¿ç¨‹æ‰€åœ¨ç½‘é¡µçš„DOMå¯¹è±¡ï¼Œä¹Ÿä¸èƒ½è·å– documentã€ windowç­‰å¯¹è±¡ï¼Œä½†æ˜¯å¯ä»¥è·å– navigatorã€ location(åªè¯»)ã€XMLHttpRequestã€ setTimeoutæ—ç­‰æµè§ˆå™¨APIã€‚ é€šä¿¡é™åˆ¶ workerçº¿ç¨‹ä¸ä¸»çº¿ç¨‹ä¸åœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œéœ€è¦é€šè¿‡ postMessageæ–¹æ³•æ¥é€šä¿¡ã€‚ è„šæœ¬é™åˆ¶ workerçº¿ç¨‹ä¸èƒ½æ‰§è¡Œ alertã€ confirmï¼Œä½†å¯ä»¥ä½¿ç”¨ XMLHttpRequest å¯¹è±¡å‘å‡ºajaxè¯·æ±‚ã€‚ æ¼«è°ˆå‰ç«¯æ€§èƒ½ çªç ´ React åº”ç”¨ç“¶é¢ˆ React ç»“åˆ Web worker ? å°è¯•åœ¨ Web worker ä¸­è¿è¡Œ React Virtual DOM çš„ç›¸å…³è®¡ç®—ï¼Œå³å°† React core éƒ¨åˆ†ç§»å…¥ Web worker çº¿ç¨‹ä¸­ ? è¿˜çœŸæœ‰äººæå‡ºç±»ä¼¼æƒ³æ³•ï¼š3092 issueï¼Œä½†æ˜¯ææ¡ˆè¢«æ‹’ç»äº†ï¼Œreact é€‰æ‹©çš„æ˜¯ React Fiberã€‚ ä½†æ˜¯è¿™ä¸ªå¹¶ä¸å¦¨ç¢ Web worker æˆä¸º â€œæ°‘é—´â€ çš„ react æ€§èƒ½è§£è¯ï¼š React Redux ä¸­é—´ä»¶æ€æƒ³é‡è§ Web Worker çš„çµæ„Ÿï¼ˆé™„demoï¼‰å¦å¤–ä¸¾ä¸ªä¾‹å­å¯¹æ¯”: http://web-perf.github.io/react-worker-dom/]]></content>
      <categories>
        <category>Webå‰ç«¯</category>
      </categories>
      <tags>
        <tag>Webå‰ç«¯</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[hexo & github page æ­å»ºåšå®¢]]></title>
    <url>%2F2019%2F08%2F17%2F%E5%85%B6%E4%BB%96%2Fhexo%20%26%20github%20page%20%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%2F</url>
    <content type="text"><![CDATA[Hexoæ­å»ºçš„GitHubåšå®¢æ­å»ºæ­å»ºè¿‡ç¨‹å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šæ‰‹æŠŠæ‰‹æ•™ä½ ä½¿ç”¨ Hexo + Github Pages æ­å»ºä¸ªäººç‹¬ç«‹åšå®¢ Hexo ä¸»é¢˜é…ç½®å»ºè®®è®¾ç½®ä¸º next ä¸»é¢˜ å…‹éš†ä»“åº“ 12// git cloneå‘½ä»¤å°†Nextä»“åº“å…‹éš†åˆ°hexoç›®å½•ä¸‹çš„themes/nextgit clone https://github.com/theme-next/hexo-theme-next.git themes/next è®¾ç½®Nextä¸»é¢˜ 12345// åœ¨ç«™ç‚¹æ ¹ç›®å½•ä¸‹ï¼Œè®¾ç½®ä»¥ä¸‹ä»£ç ï¼š# Extensions## Plugins: https://hexo.io/plugins/## Themes: https://hexo.io/themes/theme: hexo-theme-next #æ­¤å¤„å¡«å…¥ä½ åœ¨themesç›®å½•ä¸‹çš„nextä¸»é¢˜æ–‡ä»¶å ä¸ªæ€§åŒ–è®¾ç½®å¤§è‡´è®¾ç½®è¿‡ç¨‹å‚è§è¿™ç¯‡æ–‡ç« ï¼š Hexoæ­å»ºçš„GitHubåšå®¢ä¹‹ä¼˜åŒ–å¤§å…¨ å¼€å¯æ–‡ç« é˜…è¯»æ¬¡æ•°åŠŸèƒ½ ç¬¬ä¸€ç§æ–¹æ³•ï¼šLeanCloud (å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼šhttps://www.jianshu.com/p/702a7aec4d00) å» LeanCloud ï¼Œåˆ›å»ºæ–°åº”ç”¨ï¼Œåˆ›å»º Counter ç±» ä¿®æ”¹ä¸»é¢˜æ–‡ä»¶ 1234leancloud_visitors: enable: true #å°†åŸæ¥çš„falseæ”¹ä¸ºtrue app_id: #&lt;app_id&gt; app_key: #&lt;app_key&gt; ç¬¬äºŒç§æ–¹æ³•ï¼š å¼€å¯ä¸è’œå­ç»Ÿè®¡åŠŸèƒ½ åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­ _config.yml ï¼š 1234567891011121314# Show Views/Visitors of the website/page with busuanzi.# Get more information on http://ibruce.info/2015/04/04/busuanzi/busuanzi_count: enable: true site_uv: true #total visitors site_uv_icon: #user-circle site_uv_header: ä½ æ˜¯æ¥è®¿çš„ç¬¬ site_uv_footer: ä½å°ä¼™ä¼´ site_pv: false #total views site_pv_icon: eye site_pv_header: è®¿é—®æ¬¡æ•°ï¼š site_pv_footer: æ¬¡ post_views: false post_views_icon: eye ä¸è¿‡å› ä¸ºåŸŸåè¿‡æœŸé—®é¢˜ï¼Œnext é»˜è®¤é›†æˆçš„ valine è„šæœ¬æ— æ³•è®¿é—®ï¼Œè§£å†³åŠæ³•å‚è§ï¼šhexoåšå®¢è§£å†³ä¸è’œå­ç»Ÿè®¡æ— æ³•æ˜¾ç¤ºé—®é¢˜ å¼€å¯ valine è¯„è®ºåŠŸèƒ½å¤§è‡´è®¾ç½®è¿‡ç¨‹å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š Hexoåšå®¢ä½¿ç”¨valineè¯„è®ºç³»ç»Ÿæ— æ•ˆæœåŠç»ˆæè§£å†³æ–¹æ¡ˆ éœ€è¦ç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼š valineè¯„è®ºå’Œæ–‡ç« é˜…è¯»æ¬¡æ•°åŠŸèƒ½å‡åŸºäºLeanCloudï¼Œä¸¤è€…æœ‰å†²çªã€‚ è§£å†³çš„åŠæ³•æ˜¯ï¼šåŸºäºLeanCloudå¼€å¯ valine è¯„è®ºï¼ŒåŸºäºä¸è’œå­å¼€å¯æ–‡ç« ç»Ÿè®¡åŠŸèƒ½ã€‚]]></content>
      <categories>
        <category>å…¶ä»–</category>
      </categories>
      <tags>
        <tag>å…¶ä»–</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Python]]></title>
    <url>%2F2019%2F08%2F15%2FPython%2FPython%2F</url>
    <content type="text"></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>Python</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[WebAssembly]]></title>
    <url>%2F2019%2F08%2F15%2FWebAssembly%2FWebAssembly%2F</url>
    <content type="text"></content>
      <categories>
        <category>WebAssembly</category>
      </categories>
      <tags>
        <tag>WebAssembly</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[react hooks]]></title>
    <url>%2F2019%2F08%2F15%2FWeb%E5%89%8D%E7%AB%AF%2Freact%20hooks%2F</url>
    <content type="text"><![CDATA[react hookswhat Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§ã€‚ Hook ç®€ä»‹ why react hooks ä¸»è¦è§£å†³ä»¥ä¸‹ä¸‰ä¸ªä¸»è¦çš„é—®é¢˜ï¼š ä»£ç é‡ç”¨ï¼šåœ¨ hooks å‡ºæ¥ä¹‹å‰ï¼Œå¸¸è§çš„ä»£ç é‡ç”¨æ–¹å¼æ˜¯ HOC å’Œ render propsï¼Œè¿™ä¸¤ç§æ–¹å¼å¸¦æ¥çš„é—®é¢˜æ˜¯ï¼š ä½ éœ€è¦è§£æ„è‡ªå·±çš„ç»„ä»¶ï¼Œéå¸¸çš„ç¬¨é‡ï¼ŒåŒæ—¶ä¼šå¸¦æ¥å¾ˆæ·±çš„ç»„ä»¶åµŒå¥—ã€‚ éš¾ä»¥é‡ç”¨å’Œå…±äº«ç»„ä»¶ä¸­çš„ä¸çŠ¶æ€ç›¸å…³çš„é€»è¾‘ï¼Œé€ æˆäº§ç”Ÿå¾ˆå¤šå·¨å¤§çš„ç»„ä»¶ã€‚ å¤æ‚çš„ç»„ä»¶é€»è¾‘ï¼šåœ¨ class ç»„ä»¶ä¸­ï¼Œæœ‰è®¸å¤šçš„ lifecycle å‡½æ•°ï¼Œå½“æˆ‘ä»¬çš„ç»„ä»¶éœ€è¦å¤„ç†å¤šä¸ªäº’ä¸ç›¸å…³çš„ localstate æ—¶ï¼Œæ¯ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ä¸­å¯èƒ½ä¼šåŒ…å«ç€å„ç§äº’ä¸ç›¸å…³çš„é€»è¾‘åœ¨é‡Œé¢ï¼Œæœ€ç»ˆå¯¼è‡´é€»è¾‘å¤æ‚çš„ç»„ä»¶éš¾ä»¥å¼€å‘ä¸ç»´æŠ¤ã€‚ class ç»„ä»¶çš„å›°æƒ‘ï¼š å¤æ‚çš„æ¨¡å¼ï¼Œå¦‚æ¸²æŸ“é“å…·å’Œé«˜é˜¶ç»„ä»¶ã€‚ ç”±äºä¸šåŠ¡å˜åŠ¨ï¼Œå‡½æ•°ç»„ä»¶ä¸å¾—ä¸æ”¹ä¸ºç±»ç»„ä»¶ å¦å¤–è¿˜å¯ä»¥å‚è€ƒä¸€ä¸‹è¿™ä¸ªå›ç­”ï¼šå¦‚ä½•è¯„ä»· React v16.7.0-alpha æå‡ºçš„ Hooks APIï¼Ÿ å®˜æ–¹æ–‡æ¡£ï¼š åŠ¨æœº how useState(0) è¿”å›æ˜¯ä¸ªæ•°ç»„å½¢å¼ï¼ŒuseState(0) ä»£è¡¨ count çš„åˆå§‹å€¼æ˜¯ 0ï¼ŒuseState ç°é˜¶æ®µåªèƒ½ä¼ å…¥ä¸€ä¸ªåˆå§‹å€¼ã€‚useState ç±»ä¼¼ setStateï¼Œä½ å¯ä»¥çœ‹åšæ˜¯å¼‚æ­¥çš„ï¼Œä½† useState å¿…é¡»ä¿è¯æ‰§è¡Œé¡ºåºä¸€ä¸€è‡´ï¼ŒReact ä¸ºæ¯ä¸€æ¬¡çš„ useState è°ƒç”¨åˆ†é…ä¸€ä¸ªç©ºé—´ï¼Œé€šè¿‡ useState è°ƒç”¨é¡ºåºè¾¨åˆ«å„ä¸ªç©ºé—´ã€‚ 12345678910const Counter = () =&gt; &#123; const [count, setCount] = useState(0); const increment = () =&gt; setCount(count + 1); return ( &lt;&gt; &lt;h1&gt;&#123;count&#125;&lt;/h1&gt; &lt;button onClick=&#123;increment&#125;&gt;+&lt;/button&gt; &lt;/&gt; )&#125; useEffect å¯ä»¥æŠŠ useEffect è§†ä½œ componentDidMountã€componentDidUpdate åˆä½“ã€‚é€šè¿‡ useEffect çš„ç¬¬äºŒä¸ªå‚æ•°å‘Šè¯‰ React ç”¨åˆ°äº†å“ªäº›å¤–éƒ¨å˜é‡ï¼Œæ¥å†³å®šæ˜¯å¦æ›´æ–°æ—¶å€™æ‰§è¡Œã€‚å¯ä»¥å®šä¹‰å¤šä¸ª useEffect å‡½æ•°ï¼Œä¼šä¸€æ¬¡è¿›è¡Œè°ƒç”¨ã€‚ 123useEffect(() =&gt; &#123; // æ¯æ¬¡componentDidMountæˆ–è€…componentDidUpdateéƒ½ä¼šè°ƒç”¨è¿™é‡Œ&#125;) useEffect å¯ä»¥ä¼ å…¥ç¬¬äºŒä¸ªæ“ä½œæ¥é¿å…æ€§èƒ½çš„æŸè€—ï¼Œå¦‚æœç¬¬äºŒä¸ªå‚æ•°æ•°ç»„ä¸­çš„æˆå‘˜å˜é‡æ²¡æœ‰å˜åŒ–åˆ™ä¼šè·³è¿‡æ­¤æ¬¡æ”¹å˜ã€‚å¦‚ä½•ä¼ å…¥ä¸€ä¸ªç©ºæ•°ç»„ ï¼Œè¯´æ˜æ¯æ¬¡éƒ½ä¸æ”¹å˜ï¼Œé‚£ä¹ˆè¯¥ effect åªä¼šåœ¨ç»„ä»¶ mount å’Œ unmount æ—¶æœŸæ‰§è¡Œã€‚ 123useEffect(() =&gt; &#123; // æ¯æ¬¡componentDidMountä¼šè°ƒç”¨è¿™é‡Œ&#125;,[]) å¦‚æœéœ€è¦åœ¨ componentWillUnmount éœ€è¦æ‰§è¡Œä¸€äº›äº‹ä»¶ï¼Œå¯ä»¥ return è¿”å›æ—¶å€™è¿›è¡Œæ“ä½œã€‚ 123456useEffect(() =&gt; &#123; //åªæœ‰componentDidMountæ—¶å€™è°ƒç”¨è¿™é‡Œ return () =&gt; &#123; // åªæœ‰componentDidMountUnmountæ—¶å€™è°ƒç”¨è¿™é‡Œ &#125;;&#125;, []) useEffect æ¨¡æ‹Ÿ componentDidpdateï¼ŒuseRefæ˜¯æ°¸è¿œä¸ä¼šæ”¹å˜çš„ä¸€ä¸ªhooksï¼Œæ¯æ¬¡è¿”å›å€¼éƒ½æ˜¯ç›¸åŒçš„ã€‚ 12345678const mounted = useRef();useEffect(() =&gt; &#123; if(!mounted.current)&#123; mounted.current = true; &#125; else &#123; // æ‰§è¡Œ componentDidpdate &#125;&#125;) useLayoutEffectï¼šå¦‚æœå‰¯ä½œç”¨æ˜¯è·Ÿ DOM ç›¸å…³çš„ï¼Œéœ€è¦ä½¿ç”¨ useLayoutEffectï¼ŒuseLayoutEffect ä¸­çš„å‰¯ä½œç”¨ä¼šåœ¨ DOM æ›´æ–°ä¹‹ååŒæ­¥æ‰§è¡Œã€‚ 1234567891011121314function App() &#123; const [width, setWidth] = useState(0); useLayoutEffect(() =&gt; &#123; const title = document.querySelector(&apos;#title&apos;); const titleWidth = title.getBoundingClientRect().width; if (width !== titleWidth) &#123; setWidth(titleWidth); &#125; &#125;); return &lt;div&gt; &lt;h1 id=&quot;title&quot;&gt;hello&lt;/h1&gt; &lt;h2&gt;&#123;width&#125;&lt;/h2&gt; &lt;/div&gt;&#125; useReducer æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ reducer å‡½æ•°ï¼Œè·Ÿ redux ä¸­çš„ reducer æ˜¯ä¸€æ ·çš„ï¼›å¦å¤–ä¸€ä¸ªæ˜¯åˆå§‹çš„çŠ¶æ€å€¼ã€‚è¿”å›çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯çŠ¶æ€å€¼ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ˜¯ dispatch å‡½æ•°ã€‚ 12345678910111213141516171819202122const reducer = (state, action) =&gt; &#123; switch(action.type) &#123; case &apos;increment&apos;: return &#123;count: state.count + 1&#125;; case &apos;decrement&apos;: return &#123;count: state.count - 1&#125;; case &apos;reset&apos;: return initState; default: return state; &#125;&#125;;function App() &#123; const [state, dispatch] = useReducer(reducer, initState); return &lt;div&gt; &lt;h1&gt;&#123;state.count&#125;&lt;/h1&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123;type: &apos;increment&apos;&#125;)&#125;&gt;+&lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123;type: &apos;decrement&apos;&#125;)&#125;&gt;-&lt;/button&gt; &lt;button onClick=&#123;() =&gt; dispatch(&#123;type: &apos;reset&apos;&#125;)&#125;&gt;reset&lt;/button&gt; &lt;/div&gt;&#125; useRefï¼šåœ¨å‡½æ•°ç»„ä»¶ä¸­è·å–ç»„ä»¶æˆ–DOMèŠ‚ç‚¹çš„å¼•ç”¨ã€‚ 12345678function App() &#123; const inputRef = useRef(null); return &lt;div&gt; &lt;input type=&quot;text&quot; ref=&#123;inputRef&#125;/&gt; &lt;button onClick=&#123;() =&gt; inputRef.current.focus()&#125;&gt;focus&lt;/button&gt; &lt;/div&gt;&#125; è‡ªå®šä¹‰ hooksä¸¾ä¸ªğŸŒ°custom Hooks è‡ªå®šä¹‰ç›‘å¬çª—å£å¤§å°ç»„ä»¶ 12345678// ä¸€ä¸ªæ˜¾ç¤ºç›®å‰çª—å£å¤§å°çš„ç»„ä»¶function responsiveComponent()&#123; // custom hooks const width = useWindowWidth(); return ( &lt;p&gt;å½“å‰çª—å£çš„å®½åº¦æ˜¯ &#123;width&#125;&lt;/p&gt; )&#125; custom hooks â€”â€” useWindowWidth çª—å£è°ƒæ•´å¤§å°æ—¶ä½¿ç”¨å‰¯ä½œç”¨æ¥è®¾ç½®è¯¥çŠ¶æ€ 1234567891011121314import &#123; useState, useEffect&#125; from &apos;react&apos;;// custom hooks to listen window width changefunction useWindowWidth()&#123; const [width, setWidth] = useState(window.innerWidth); useEffect(() =&gt; &#123; const handleResize = ()=&gt;&#123; setWidth(window.innerWidth); &#125; window.addEventListener(&apos;resize&apos;, handleResize); &#125;, [width]); // width æ²¡æœ‰å˜åŒ–åˆ™ä¸å¤„ç† return width;&#125; æ­¤å¤–è¿˜å¯ä»¥å‚è€ƒä¸€ä¸ªæœ‰æ„æ€çš„ hooks åº“ react-use é™åˆ¶æ¡ä»¶ ä»…ä» React åŠŸèƒ½ç»„ä»¶è°ƒç”¨ hooksã€‚ä¸è¦ä»å¸¸è§„ js å‡½æ•°ä¸­è°ƒç”¨ hooksã€‚( è¿˜æœ‰å¦ä¸€ä¸ªåœ°æ–¹å¯ä»¥è°ƒç”¨ hooksâ€”â€” ä½ è‡ªå·±çš„å®šåˆ¶ hooksã€‚) åªèƒ½åœ¨é¡¶å±‚è°ƒç”¨ï¼Œä¸èƒ½åœ¨ for å¾ªç¯ã€if æ¡ä»¶åˆ¤æ–­ã€ å‡½æ•°åµŒå¥—ä¸­ä½¿ç”¨ã€‚ Psï¼šè¯‘: React hooks: ä¸æ˜¯é­”æ³•åªæ˜¯æ•°ç»„ ä¸€æ–‡ä¸­æœ‰è§£é‡Šä¸ºä»€ä¹ˆ hooks åªèƒ½åœ¨é¡¶å±‚è°ƒç”¨ã€‚ åŸç†ä¸å®ç° [[è¯‘] React hooks: ä¸æ˜¯é­”æ³•ï¼Œåªæ˜¯æ•°ç»„](http://react-china.org/t/react-hooks/27122) useState åº•å±‚å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354let state = [];let setters = [];let firstRun = true;let cursor = 0;function createSetter(cursor) &#123; return function setterWithCursor(newVal) &#123; state[cursor] = newVal; &#125;;&#125;// This is the pseudocode for the useState helperexport function useState(initVal) &#123; if (firstRun) &#123; state.push(initVal); setters.push(createSetter(cursor)); firstRun = false; &#125; const setter = setters[cursor]; const value = state[cursor]; cursor++; return [value, setter];&#125;// Our component code that uses hooksfunction RenderFunctionComponent() &#123; const [firstName, setFirstName] = useState(&quot;Rudi&quot;); // cursor: 0 const [lastName, setLastName] = useState(&quot;Yardley&quot;); // cursor: 1 return ( &lt;div&gt; &lt;Button onClick=&#123;() =&gt; setFirstName(&quot;Richard&quot;)&#125;&gt;Richard&lt;/Button&gt; &lt;Button onClick=&#123;() =&gt; setFirstName(&quot;Fred&quot;)&#125;&gt;Fred&lt;/Button&gt; &lt;/div&gt; );&#125;// This is sort of simulating Reacts rendering cyclefunction MyComponent() &#123; cursor = 0; // resetting the cursor return &lt;RenderFunctionComponent /&gt;; // render&#125;console.log(state); // Pre-render: []MyComponent();console.log(state); // First-render: [&apos;Rudi&apos;, &apos;Yardley&apos;]MyComponent();console.log(state); // Subsequent-render: [&apos;Rudi&apos;, &apos;Yardley&apos;]// click the &apos;Fred&apos; buttonconsole.log(state); // After-click: [&apos;Fred&apos;, &apos;Yardley&apos;] å‚è€ƒæ–‡ç«  react hooksçš„è¯ç”Ÿ ç†è§£ React Hooks è¯‘: React hooks: ä¸æ˜¯é­”æ³•åªæ˜¯æ•°ç»„ How to fetch data with React Hooks]]></content>
      <categories>
        <category>Webå‰ç«¯</category>
      </categories>
      <tags>
        <tag>Webå‰ç«¯</tag>
      </tags>
  </entry>
</search>
